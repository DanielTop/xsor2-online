/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
    v2.0.3 (c) Kyle Simpson
    MIT License
    Patched by Andy Stibbard to provide script execute callback option
*/
(function(a){function s(a){return Object.prototype.toString.call(a)=="[object Function]"}function t(a){return Object.prototype.toString.call(a)=="[object Array]"}function u(a,b){var c=/^\w+\:\/\//;if(/^\/\/\/?/.test(a)){a=location.protocol+a}else if(!c.test(a)&&a.charAt(0)!="/"){a=(b||"")+a}return c.test(a)?a:(a.charAt(0)=="/"?k:j)+a}function v(a,b){for(var c in a){if(a.hasOwnProperty(c)){b[c]=a[c]}}return b}function w(a){var b=false;for(var c=0;c<a.scripts.length;c++){if(a.scripts[c].ready&&a.scripts[c].exec_trigger){b=true;a.scripts[c].exec_trigger();a.scripts[c].exec_trigger=null}}return b}function x(a,b,c,d){a.onload=a.onreadystatechange=function(){if(a.readyState&&a.readyState!="complete"&&a.readyState!="loaded"||b[c])return;a.onload=a.onreadystatechange=null;d()}}function y(a){a.ready=a.finished=true;for(var b=0;b<a.finished_listeners.length;b++){a.finished_listeners[b]()}a.ready_listeners=[];a.finished_listeners=[]}function z(a,b,d,e,f){setTimeout(function(){var g,h=b.real_src,i;if("item"in l){if(!l[0]){setTimeout(arguments.callee,25);return}l=l[0]}g=document.createElement("script");if(b.type)g.type=b.type;if(b.charset)g.charset=b.charset;if(f){if(p){d.elem=g;if(o){g.preload=true;g.onpreload=e}else{g.onreadystatechange=function(){if(g.readyState=="loaded")e()}}g.src=h}else if(f&&h.indexOf(k)==0&&a[c]){i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState==4){i.onreadystatechange=function(){};d.text=i.responseText+"\n//@ sourceURL="+h;e()}};i.open("GET",h);i.send()}else{g.type="text/cache-script";x(g,d,"ready",function(){l.removeChild(g);e()});g.src=h;l.insertBefore(g,l.firstChild)}}else if(q){g.async=false;x(g,d,"finished",e);g.src=h;l.insertBefore(g,l.firstChild)}else{x(g,d,"finished",e);g.src=h;l.insertBefore(g,l.firstChild)}},0)}function A(){function q(a,b,c){function f(){if(d!=null){d=null;y(c)}}var d;if(n[b.src].finished)return;if(!a[e])n[b.src].finished=true;d=c.elem||document.createElement("script");if(b.type)d.type=b.type;if(b.charset)d.charset=b.charset;x(d,c,"finished",f);if(c.elem){c.elem=null}else if(c.text){d.onload=d.onreadystatechange=null;d.text=c.text}else{d.src=b.real_src}l.insertBefore(d,l.firstChild);if(c.text){f()}}function B(a,b,c,d){var h,i,j=function(){b.ready_cb(b,function(){q(a,b,h)})},k=function(){b.finished_cb(b,c,a)};b.src=u(b.src,a[g]);b.real_src=b.src+(a[f]?(/\?.*$/.test(b.src)?"&_":"?_")+~~(Math.random()*1e9)+"=":"");if(!n[b.src])n[b.src]={items:[],finished:false};i=n[b.src].items;if(a[e]||i.length==0){h=i[i.length]={ready:false,finished:false,ready_listeners:[j],finished_listeners:[k]};z(a,b,h,d?function(){h.ready=true;for(var a=0;a<h.ready_listeners.length;a++){h.ready_listeners[a]()}h.ready_listeners=[]}:function(){y(h)},d)}else{h=i[0];if(h.finished){k()}else{h.finished_listeners.push(k)}}}function C(){function l(a,b){a.ready=true;a.exec_trigger=b;n()}function m(a,b,d){a.ready=a.finished=true;a.exec_trigger=null;if(d[h]){var e,f=0,g=0;for(e in c){if(c[e].scripts){f++;if(c[e].scripts[0].finished)g++}}d[h](a.src,g,f)}for(i=0;i<b.scripts.length;i++){if(!b.scripts[i].finished)return}b.finished=true;n()}function n(){while(e<c.length){if(s(c[e])){try{c[e++]()}catch(a){}continue}else if(!c[e].finished){if(w(c[e]))continue;break}e++}if(e==c.length){f=false;g=false}}function o(){if(!g||!g.scripts){c.push(g={scripts:[],finished:true})}}var a,b=v(j,{}),c=[],e=0,f=false,g;a={script:function(){for(var c=0;c<arguments.length;c++){(function(c,e){var h;if(!t(c)){e=[c]}for(var i=0;i<e.length;i++){o();c=e[i];if(s(c))c=c();if(!c)continue;if(t(c)){h=[].slice.call(c);h.unshift(i,1);[].splice.apply(e,h);i--;continue}if(typeof c=="string")c={src:c};c=v(c,{ready:false,ready_cb:l,finished:false,finished_cb:m});g.finished=false;g.scripts.push(c);B(b,c,g,k&&f);f=true;if(b[d])a.wait()}})(arguments[c],arguments[c])}return a},wait:function(){if(arguments.length>0){for(var b=0;b<arguments.length;b++){c.push(arguments[b])}g=c[c.length-1]}else g=false;n();return a}};return{script:a.script,wait:a.wait,setOptions:function(c){v(c,b);return a}}}var j={},k=p||r,m=[],n={},o;j[c]=true;j[d]=false;j[e]=false;j[f]=false;j[g]="";o={setGlobalDefaults:function(a){v(a,j);return o},setOptions:function(){return C().setOptions.apply(null,arguments)},script:function(){return C().script.apply(null,arguments)},wait:function(){return C().wait.apply(null,arguments)},queueScript:function(){m[m.length]={type:"script",args:[].slice.call(arguments)};return o},queueWait:function(){m[m.length]={type:"wait",args:[].slice.call(arguments)};return o},runQueue:function(){var a=o,b=m.length,c=b,d;for(;--c>=0;){d=m.shift();a=a[d.type].apply(null,d.args)}return a},noConflict:function(){a.$LAB=b;return o},sandbox:function(){return A()}};return o}var b=a.$LAB,c="UseLocalXHR",d="AlwaysPreserveOrder",e="AllowDuplicates",f="CacheBust",g="BasePath",h="ExecuteCallback",j=/^[^?#]*\//.exec(location.href)[0],k=/^\w+\:\/\/\/?[^\/]+/.exec(j)[0],l=document.head||document.getElementsByTagName("head"),m=a.opera&&Object.prototype.toString.call(a.opera)=="[object Opera]"||"MozAppearance"in document.documentElement.style,n=document.createElement("script"),o=typeof n.preload=="boolean",p=o||n.readyState&&n.readyState=="uninitialized",q=!p&&n.async===true,r=!p&&!q&&!m;a.$LAB=A();(function(a,b,c){if(document.readyState==null&&document[a]){document.readyState="loading";document[a](b,c=function(){document.removeEventListener(b,c,false);document.readyState="complete"},false)}})("addEventListener","DOMContentLoaded")})(this)